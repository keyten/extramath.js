!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define("extramath",[],function(){return e()}):t.extramath=t.em=e()}(function(){return{version:"0.0.1"}},this),extramath.modulesDef={},extramath.modules={},extramath.declare=function(e,t,n){n||(n=t,t=[]),extramath.modulesDef[e]={name:e,deps:t,fn:n,ctx:this}},extramath.require=function(e,t,n,r){var a=this;Array.isArray(e)||(e=[e]),n||(n=[]);var o=[];e.forEach(function(i){if(n.indexOf(i),n.push(i),extramath.modules[i])return o.push(extramath.modules[i]),void(e.length===o.length&&t.apply(a,r?[o]:o));var u=extramath.modulesDef[i];u.deps.length?extramath.require(u.deps,function(n){u.fn.apply(a,[function(n){extramath.modules[i]=n,o.push(extramath.modules[i]),e.length===o.length&&t.apply(a,r?[o]:o)}].concat(n))},n.slice(),!0):u.fn.call(a,function(n){extramath.modules[i]=n,o.push(extramath.modules[i]),e.length===o.length&&t.apply(a,r?[o]:o)})})},extramath.installAt=function(e,t){var n=this,r=e.split(".");r.slice(0,r.length-1).forEach(function(e){n=n[e]?n[e]:n[e]={}}),n[r[r.length-1]]=t},extramath.factorial=function(e){},extramath.declare("em.syntaxTree",function(e){function t(e,t,n){this.type=e,this.value=t,this.children=n||[]}t.prototype.toString=function(e){return e||(e=0),new Array(e+1).join(" ")+this.value+" ["+this.type+"]\n"+this.children.map(function(t){return t.toString(e+1)}).join("")};var n=[["+","-"],["*","/"]];function r(e,a){for(var o,i="",u=0;u<e.length;u++){if(o=e[u],n[a].indexOf(o)>-1)return new t("Operator",o,[r(i,a),r(e.substr(u+1),0)]);i+=o}return a==n.length-1?new t("Word",i):r(i,a+1)}function a(e,t){for(var n,r="",o="",i=[],u=0,h=0;h<e.length;h++)if(n=e[h],0===u)if("("===n)r="",u++,o+="@"+(t+1)+"("+i.length+")";else{if(")"===n)return new Error("Parsing error");o+=n}else"("===n?u++:")"===n&&u--,u>0?r+=n:i.push(r);return[o,i.map(function(e){return e.indexOf("(")>-1?a(e,t+1):e})]}e({braceTree:a,operatorTree:r,syntaxTree:function(e,t){if(t||(t=0),-1===e.indexOf("("))return r(e,t);var n,o=a(e,t);return console.log(o),(n=r(o[0],0)).children=n.children.map(function(e){e.type}),n}})});